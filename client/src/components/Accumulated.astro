---
import IconButton from './IconButton.astro'

const { id } = Astro.props
---

<div class="w-full mt-4 p-4 bg-secondary rounded-lg flex items-center justify-between">
  <div>
    <h2 class="text-xl">
      Accumulated
    </h2>

    <input 
      id = `acc-input-${id}`
      type = "text"
      disabled = "true"
      class = "text-2xl font-bold border border-transparent outline-none rounded-md" 
      value = "$4000" 
    />
  </div>

  <IconButton 
    id = `acc-edit-${id}`
    iconName ="lucide--edit-3 text-xl"
  />
</div>

<script define:vars = {{ id }}>
const input = document.querySelector(`input#acc-input-${id}`)
const btnEdit = document.querySelector(`button#icon-button-acc-edit-${id}`)

if(btnEdit)
  btnEdit.addEventListener("click", () => {
    if(!input) return

    if(input.getAttribute("disabled")) { // Edit action
      input.classList.remove("border-transparent")
      input.classList.add("border-gray-500")
      input.removeAttribute("disabled")

      btnEdit.querySelector("span").classList.remove("lucide--edit-3")
      btnEdit.querySelector("span").classList.add("lucide--save")
    }
    else { // Save action
      input.setAttribute("disabled", "true")
      input.classList.remove("border-gray-300")
      input.classList.add("border-transparent")

      btnEdit.querySelector("span").classList.remove("lucide--save")
      btnEdit.querySelector("span").classList.add("lucide--edit-3")
    }
 
  })
</script>
